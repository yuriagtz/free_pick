# Project TODO

## 基本機能
- [x] Googleカレンダー認証機能の実装
- [x] カレンダーイベント取得機能の実装
- [x] 空き時間抽出ロジックの実装
- [x] 期間指定UI(開始日・終了日)の実装
- [x] 空き時間リスト表示UI(シンプルなリスト形式)の実装
- [x] コピー可能なテキスト出力機能の実装
- [x] ユーザーのカレンダー設定保存機能の実装

## バグ修正
- [x] Google OAuthリダイレクトURI問題の修正
- [x] 空き時間計算ロジックのタイムゾーン問題修正
- [x] Google OAuthコールバックルート404エラー修正
- [x] env.tsにGoogle関連環境変数追加
- [x] データベーステーブル作成(google_tokens)
- [x] ログインボタン追加

## 機能追加
- [x] 複数カレンダー選択機能
- [x] 自動ログイン機能（未認証ユーザーのリダイレクト）

## 新機能追加（追加2）
- [x] 予定の前後バッファ時間設定（予定の前後○分をNGにする）
- [x] 連続した空き時間の統合表示（細かい枠ではなく、まとまった空き時間を表示）
- [x] 曜日フィルター設定（土日除外、特定曜日のみ対象など）

## バグ修正（追加）
- [x] ログインループ問題の修正

## バグ修正（追加2）
- [x] 開始日より前の日付が表示される問題の修正
- [x] 開始日を今日より前に設定できないようにする制限追加

## バグ修正（追加3）
- [x] 開始日より1日前の日付が表示される問題の修正（タイムゾーン問題）

## バグ修正（追加4）
- [x] 終了日が空き時間一覧に含まれない問題の修正

## テストとドキュメント
- [x] 動作確認とテスト
- [x] ユーザーガイド作成

## バグ修正（追加5）
- [x] 終了日が空き時間一覧に含まれない問題の再調査と修正（原因：終日予定とカレンダー選択の問題）

## バグ修正（追加6）
- [x] 終日予定（誕生日、祝日）が業務時間全体をブロックする問題
- [ ] カレンダー選択が機能せず全カレンダーの予定が取得される問題

## 機能追加（追加3）
- [x] 終日予定を無視する機能をチェックボックスで選択可能にする（デフォルト：OFF）

## 機能追加（追加4）
- [x] 誕生日イベントを自動除外する機能（終日予定かつイベント名に「誕生日」または「Birthday」が含まれる場合）
- [x] 「終日予定を無視」のデフォルトをOFFに変更

## 機能追加（追加5）
- [x] プライマリカレンダーを一番上に表示
- [x] プライマリカレンダーをデフォルトでチェック
- [x] カレンダーが1つも選択されていない場合、警告を表示し、空き時間確認ボタンを無効化

## バグ修正（追加7）
- [x] 「連続した空き時間をまとめて表示」選択時、枠の長さを無視して全ての連続空き時間をまとめる
- [x] マージ後の終了時刻が正しく計算されない問題

## 機能追加（追加6）
- [x] 「連続した空き時間をまとめて表示」選択時、枠の長さ入力をグレーアウト


## バグ修正（追加8）
- [x] 「連続した空き時間をまとめて表示」がONでも、30分スロットで区切られてしまい、13:45や18:00まで到達しない問題
